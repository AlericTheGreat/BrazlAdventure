define(["require","exports","tslib","modules/clean/react/comments2/store/api","modules/clean/api_v2/error","modules/clean/react/file_sidebar/store/sidebar/types","modules/clean/react/file_sidebar/store/sidebar/actions","modules/clean/react/file_sidebar/store/instance","modules/clean/react/comments2/store/types","modules/clean/react/comments2/bolt_client/comments2_bolt_client","modules/clean/react/comments2/helper","modules/clean/react/comments2/logger"],function(e,t,n,r,o,a,i,c,s,u,d,m){"use strict";function l(){return{type:s.ActionType.ListCommentsRequest,payload:{}}}function p(){return{type:s.ActionType.ListCommentsError,payload:{}}}function g(e,t,n){return{type:s.ActionType.ListCommentsSuccess,payload:{threads:e,authors:t,shouldExpandThreadFromUrl:n}}}function y(){return{type:s.ActionType.AddCommentRequest,payload:{}}}function h(){return{type:s.ActionType.AddCommentError,payload:{}}}function f(e){return{type:s.ActionType.AddCommentSuccess,payload:{thread:e}}}function A(){return{type:s.ActionType.EditCommentRequest,payload:{}}}function T(){return{type:s.ActionType.EditCommentError,payload:{}}}function C(e){return{type:s.ActionType.EditCommentSuccess,payload:{thread:e}}}function k(e){return{type:s.ActionType.ActivateThread,payload:{thread:e}}}function v(){return{type:s.ActionType.MarkThreadReadRequest,payload:{}}}function R(){return{type:s.ActionType.MarkThreadReadError,payload:{}}}function _(e){return{type:s.ActionType.MarkThreadReadSuccess,payload:{threadId:e}}}function S(){return{type:s.ActionType.MarkThreadUnreadRequest,payload:{}}}function F(){return{type:s.ActionType.MarkThreadUnreadError,payload:{}}}function E(e){return{type:s.ActionType.MarkThreadUnreadSuccess,payload:{threadId:e}}}function b(){return{type:s.ActionType.MarkThreadResolvedRequest,payload:{}}}function I(){return{type:s.ActionType.MarkThreadResolvedError,payload:{}}}function U(e){return{type:s.ActionType.MarkThreadResolvedSuccess,payload:{threadId:e}}}function q(){return{type:s.ActionType.MarkThreadUnresolvedRequest,payload:{}}}function M(){return{type:s.ActionType.MarkThreadUnresolvedError,payload:{}}}function w(e){return{type:s.ActionType.MarkThreadUnresolvedSuccess,payload:{threadId:e}}}function D(){return{type:s.ActionType.ToggleShowResolved,payload:{}}}function L(){return{type:s.ActionType.DeleteCommentRequest,payload:{}}}function O(){return{type:s.ActionType.DeleteCommentError,payload:{}}}function H(e){return{type:s.ActionType.DeleteCommentSuccess,payload:{thread:e}}}function B(e){return{type:s.ActionType.UpdatePlayerCurrentTime,payload:{currentTime:e}}}function W(){return{type:s.ActionType.CheckOnboardingStatusRequest,payload:{}}}function P(){return{type:s.ActionType.CheckOnboardingStatusError,payload:{}}}function x(e){return{type:s.ActionType.CheckOnboardingStatusSuccess,payload:{onboardingResult:e}}}function z(e){return{type:s.ActionType.MarkHasOnboarded,payload:{onboardedValue:e}}}function V(e,t){return J(e,t,!0,function(n,r,o){new re(e,t,n).startLiveUpdate(t.id,o)})}function j(e){return{type:s.ActionType.InitializeMentionsContacts,payload:{user:e}}}function G(e,t){return{type:s.ActionType.MentionsMatchesUpdate,payload:{query:e,matchingContacts:t}}}function J(e,t,s,u){var d=this;return function(y){return n.__awaiter(d,void 0,void 0,function(){var d,h,f,A,T,C,k;return n.__generator(this,function(n){switch(n.label){case 0:y(l()),d=new r.Comments2Api(e.id),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,d.listComments(t)];case 2:return h=n.sent(),f=h.threads,A=h.bolt_info,T=h.users,y(g(f,T,s)),c.store.dispatch(i.setComments2FetchStatus({status:a.PermissionStatus.RECEIVED})),A&&u(y,t.id,A),[3,4];case 3:return C=n.sent(),C instanceof o.ApiError&&(k=C,k.error&&"file_not_found"===k.error[".tag"]?c.store.dispatch(i.setComments2FetchStatus({status:a.PermissionStatus.DISABLED})):m.commentLogger.logEvent(e.id,"comment_error",t)),y(p()),[3,4];case 4:return[2]}})})}}function K(e,t,n,r){return ne({userId:e.id,startAction:y,clientFn:function(e){return e.addComment(t,n,r)},successAction:function(e){return f(e.thread)},errorAction:function(e){return h()},loggingFn:d.Comments2Helper.getLoggingFuncForAddComment,loggingData:{event:r?"reply_to_comment":"new_comment",stream:t}})}function N(e,t,n){return ne({userId:e.id,startAction:L,clientFn:function(e){return e.deleteComment(t,n)},successAction:function(e){return H(e.thread)},errorAction:function(e){return O()},loggingFn:d.Comments2Helper.getLoggingFnWithThreadResult,loggingData:{event:"delete_comment",stream:t,commentId:n}})}function Q(e,t,n,r){return ne({userId:e.id,startAction:A,clientFn:function(e){return e.editComment(t,n,r)},successAction:function(e){return C(e.thread)},errorAction:function(e){return T()},loggingFn:d.Comments2Helper.getLoggingFnWithThreadResult,loggingData:{event:"edit_comment",stream:t,commentId:n}})}function X(e,t,n,r){return ne({userId:e.id,startAction:v,clientFn:function(e){return e.markThreadRead(t,n)},successAction:function(e){return _(e.id)},errorAction:function(e){return R()},loggingFn:d.Comments2Helper.getLoggingFnWithAcknowledgementResult,loggingData:{event:r===s.MarkThreadReadOrigin.ThreadActivated?"read_thread":"mark_thread_as_read",stream:t,threadId:n}})}function Y(e,t,n){return ne({userId:e.id,startAction:S,clientFn:function(e){return e.markThreadUnread(t,n)},successAction:function(e){return E(e.id)},errorAction:function(e){return F()},loggingFn:d.Comments2Helper.getLoggingFnWithAcknowledgementResult,loggingData:{event:"mark_thread_as_unread",stream:t,threadId:n}})}function Z(e,t,n){return ne({userId:e.id,startAction:b,clientFn:function(e){return e.markThreadResolved(t,n)},successAction:function(e){return U(e.id)},errorAction:function(e){return I()},loggingFn:d.Comments2Helper.getLoggingFnWithAcknowledgementResult,loggingData:{event:"resolve_thread",stream:t,threadId:n}})}function $(e,t,n){return ne({userId:e.id,startAction:q,clientFn:function(e){return e.markThreadUnresolved(t,n)},successAction:function(e){return w(e.id)},errorAction:function(e){return M()},loggingFn:d.Comments2Helper.getLoggingFnWithAcknowledgementResult,loggingData:{event:"unresolve_thread",stream:t,threadId:n}})}function ee(e){return ne({userId:e,startAction:W,clientFn:function(e){return e.checkOnboardingStatus()},successAction:function(e){return x(e)},errorAction:function(e){return P()},loggingFn:null,loggingData:null})}function te(e,t){var o=this;return function(a){return n.__awaiter(o,void 0,void 0,function(){return n.__generator(this,function(n){return a(z(t)),new r.Comments2Api(e).markHasOnboarded(t),[2]})})}}function ne(e){var t=this,o=e.userId,a=e.startAction,i=e.successAction,c=e.clientFn,s=e.errorAction,u=e.loggingFn,m=e.loggingData;return function(e){return n.__awaiter(t,void 0,void 0,function(){var t,l,p;return n.__generator(this,function(n){switch(n.label){case 0:e(a()),t=new r.Comments2Api(o),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c(t)];case 2:return l=n.sent(),e(i(l)),u&&m&&u(o,m,l),[3,4];case 3:return p=n.sent(),e(s(p)),m&&d.Comments2Helper.logCommentError(o,m),[3,4];case 4:return[2]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.listCommentsRequest=l,t.listCommentsError=p,t.listCommentsSuccess=g,t.addCommentRequest=y,t.addCommentError=h,t.addCommentSuccess=f,t.editCommentRequest=A,t.editCommentError=T,t.editCommentSuccess=C,t.activateThread=k,t.markThreadReadRequest=v,t.markThreadReadError=R,t.markThreadReadSuccess=_,t.markThreadUnreadRequest=S,t.markThreadUnreadError=F,t.markThreadUnreadSuccess=E,t.markThreadResolvedRequest=b,t.markThreadResolvedError=I,t.markThreadResolvedSuccess=U,t.markThreadUnresolvedRequest=q,t.markThreadUnresolvedError=M,t.markThreadUnresolvedSuccess=w,t.toggleShowResolved=D,t.deleteCommentRequest=L,t.deleteCommentError=O,t.deleteCommentSuccess=H,t.updatePlayerCurrentTime=B,t.checkOnboardingStatusRequest=W,t.checkOnboardingStatusError=P,t.checkOnboardingStatusSuccess=x,t.markHasOnboardedFired=z,t.listComments=V,t.initializeMentionsContacts=j,t.mentionsMatchesUpdate=G,t.addComment=K,t.deleteComment=N,t.editComment=Q,t.markThreadRead=X,t.markThreadUnread=Y,t.markThreadResolved=Z,t.markThreadUnresolved=$,t.checkOnboardingStatus=ee,t.markHasOnboarded=te;var re=(function(e){function t(t,n,r){var o=e.call(this)||this;return o.user=t,o.stream=n,o.dispatch=r,o.onBoltRefresh=function(){o.dispatch(J(o.user,o.stream,!1,function(e,t,n){o.resetLiveUpdate(t,n)}))},o}return n.__extends(t,e),t.prototype.onBoltUpdateImpl=function(){var e=this;this.dispatch(J(this.user,this.stream,!1,function(t,n,r){e.updateBoltState(n,r)}))},t})(u.BaseComments2BoltClient);t.ActionsComments2BoltClient=re});
//# sourceMappingURL=actions.min.js-vflpK9d7w.map